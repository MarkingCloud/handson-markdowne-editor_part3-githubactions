(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{370:function(t,s,a){"use strict";a.r(s);var e=a(45),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"_7-firebase-にデプロイする"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-firebase-にデプロイする"}},[t._v("#")]),t._v(" 7. Firebase にデプロイする")]),t._v(" "),a("p",[t._v("Firebase にデプロイしてみましょう。")]),t._v(" "),a("h2",{attrs:{id:"_1-トークンを取得する"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-トークンを取得する"}},[t._v("#")]),t._v(" 1. トークンを取得する")]),t._v(" "),a("p",[t._v("Firebase を CI/CD ツールなどから操作するために、トークンを発行する必要があります。")]),t._v(" "),a("p",[t._v("次の操作を行ってください。")]),t._v(" "),a("ul",[a("li",[t._v("次のコマンドを実行する。")])]),t._v(" "),a("p",[a("code",[t._v("code.7-1")]),t._v(" "),a("em",[t._v("shell")])]),t._v(" "),a("div",{staticClass:"language-properties extra-class"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("firebase")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("login:ci --no-localhost")]),t._v("\n")])])]),a("ul",[a("li",[t._v("出力された URL をクリックする。")]),t._v(" "),a("li",[t._v("Firebase にログインしているアカウントと同じアカウントを選択。")]),t._v(" "),a("li",[t._v("権限を確認して許可をクリックする。")]),t._v(" "),a("li",[t._v("出力された認証コードをコンソールに貼り付けてエンターを押下する。")])]),t._v(" "),a("img",{attrs:{src:t.$withBase("/login.gif")}}),t._v(" "),a("ul",[a("li",[t._v("出力された "),a("code",[t._v("1//")]),t._v(" から始まるトークンをコピーしてメモしておく。")])]),t._v(" "),a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[t._v("トークンの取り扱いに注意！")]),t._v(" "),a("p",[t._v("このトークンは"),a("strong",[t._v("アカウントに紐づく")]),t._v("ものになっています。"),a("br"),t._v("\nトークンが漏出すると"),a("strong",[t._v("Firebase の全リソースの操作権限を渡す")]),t._v("ことになり、大変危険です。"),a("br"),t._v("\n取り扱いには十分注意してください。")]),t._v(" "),a("p",[t._v("失効させたい時は次のコマンド利用します。")]),t._v(" "),a("div",{staticClass:"language-properties extra-class"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("firebase")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("logout --token トークン文字列")]),t._v("\n")])])])]),t._v(" "),a("h2",{attrs:{id:"_2-プロジェクト-id-を取得する"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-プロジェクト-id-を取得する"}},[t._v("#")]),t._v(" 2. プロジェクト ID を取得する")]),t._v(" "),a("p",[t._v("デプロイするためにプロジェクト ID が必要になります。")]),t._v(" "),a("p",[t._v("次の操作を行ってください。")]),t._v(" "),a("ul",[a("li",[t._v("Firebaes コンソール画面の 歯車マーク > プロジェクトを設定 を選択")]),t._v(" "),a("li",[t._v("プロジェクト ID をコピーしてメモしておく")])]),t._v(" "),a("img",{attrs:{src:t.$withBase("/id.png")}}),t._v(" "),a("h2",{attrs:{id:"_3-github-secrets-に登録する"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-github-secrets-に登録する"}},[t._v("#")]),t._v(" 3. GitHub Secrets に登録する")]),t._v(" "),a("p",[t._v("先ほどメモしたトークンとプロジェクト ID を GitHub の Secrets に登録します。")]),t._v(" "),a("p",[t._v("次の操作を行ってください。")]),t._v(" "),a("ul",[a("li",[t._v("GitHub のリポジトリ > Settings > Secrets > New repository secret を選択")]),t._v(" "),a("li",[t._v("Firebase のトークンを登録\n"),a("ul",[a("li",[t._v("Name："),a("code",[t._v("FIREBASE_TOKEN")])]),t._v(" "),a("li",[t._v("Value：出力されたトークン")])])]),t._v(" "),a("li",[t._v("プロジェクト ID を登録\n"),a("ul",[a("li",[t._v("Name："),a("code",[t._v("FIREBASE_PROJECT")])]),t._v(" "),a("li",[t._v("Value：メモしたプロジェクト ID")])])])]),t._v(" "),a("img",{attrs:{src:t.$withBase("/secret.png")}}),t._v(" "),a("h2",{attrs:{id:"_4-firebase-にデプロイする"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-firebase-にデプロイする"}},[t._v("#")]),t._v(" 4. Firebase にデプロイする")]),t._v(" "),a("p",[t._v("Firebase へデプロイする処理を記述しましょう。")]),t._v(" "),a("p",[t._v("次の操作を行ってください。")]),t._v(" "),a("ul",[a("li",[a("code",[t._v(".github/workflows/ci.yml")]),t._v(" を次の通り編集する。\n"),a("ul",[a("li",[t._v("L30 ～ L33 のコメントアウトを解除")])])])]),t._v(" "),a("p",[a("code",[t._v("code.7-3")]),t._v(" "),a("em",[t._v(".GitHub/workflows/ci.yml")])]),t._v(" "),a("div",{staticClass:"language-yml extra-class"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br")]),a("pre",{pre:!0,attrs:{class:"language-yml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" deploy\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("branches")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" main\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("jobs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("deploy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runs-on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ubuntu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("latest\n\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("steps")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/checkout@v2\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/setup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("node@v2\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("node-version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'14.15.0'")]),t._v("\n\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" npm install\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" npm install\n\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" eslint\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),a("span",{pre:!0,attrs:{class:"token scalar string"}},[t._v('\n          npx eslint "pages/*.vue"\n          npx eslint "components/*.vue"\n          npx eslint "store/*.js"')]),t._v("\n\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" generate\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" npm run generate\n\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" deploy\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),a("span",{pre:!0,attrs:{class:"token scalar string"}},[t._v("\n          npx firebase use ${{ secrets.FIREBASE_PROJECT }} --token=${{ secrets.FIREBASE_TOKEN }}\n          npx firebase deploy --only hosting --token=${{ secrets.FIREBASE_TOKEN }}")]),t._v("\n")])])]),a("ul",[a("li",[t._v("次のコマンドを実行する。")])]),t._v(" "),a("p",[a("code",[t._v("code.7-4")]),t._v(" "),a("em",[t._v("shell")])]),t._v(" "),a("div",{staticClass:"language-properties extra-class"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("git")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("add .")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("git")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v('commit -m "Firebaseにデプロイする"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("git")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("push origin HEAD")]),t._v("\n")])])]),a("p",[t._v("Firebase にデプロイされていることを確認しましょう！")])])}),[],!1,null,null,null);s.default=n.exports}}]);