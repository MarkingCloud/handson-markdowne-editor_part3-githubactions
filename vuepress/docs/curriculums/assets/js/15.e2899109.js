(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{370:function(s,t,a){"use strict";a.r(t);var e=a(45),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"_6-テストしてビルドする"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-テストしてビルドする"}},[s._v("#")]),s._v(" 6. テストしてビルドする")]),s._v(" "),a("p",[s._v("テストが失敗したパターンを確認し、ビルドまでの記述を行いましょう。")]),s._v(" "),a("h2",{attrs:{id:"_1-テストに失敗させてみる"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-テストに失敗させてみる"}},[s._v("#")]),s._v(" 1. テストに失敗させてみる")]),s._v(" "),a("p",[s._v("CI の中身として、ESLint での簡易的なテストを実施してから、ビルドする処理を記述しましょう。")]),s._v(" "),a("p",[s._v("次の操作を行ってください。")]),s._v(" "),a("ul",[a("li",[a("code",[s._v(".GitHub/workflows/ci.yml")]),s._v(" を次の通り編集する。\n"),a("ul",[a("li",[s._v("L21 ～ L28 のコメントアウトを解除")])])])]),s._v(" "),a("p",[a("code",[s._v("code.6-1")]),s._v(" "),a("em",[s._v(".GitHub/workflows/ci.yml")])]),s._v(" "),a("div",{staticClass:"language-yml extra-class"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("br"),a("br"),a("br"),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-yml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" deploy\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("branches")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" main\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("jobs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("deploy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("runs-on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ubuntu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("latest\n\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("steps")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("uses")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" actions/checkout@v2\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("uses")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" actions/setup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("node@v2\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("with")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("node-version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'14.15.0'")]),s._v("\n\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" npm install\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" npm install\n\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" eslint\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token scalar string"}},[s._v('\n          npx eslint "pages/*.vue"\n          npx eslint "components/*.vue"\n          npx eslint "store/*.js"')]),s._v("\n\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" generate\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" npm run generate\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   - name: deploy")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     run: |")]),a("span",{pre:!0,attrs:{class:"token scalar string"}},[s._v("\n    #       npx firebase use ${{ secrets.FIREBASE_PROJECT }} --token=${{ secrets.FIREBASE_TOKEN }}\n    #       npx firebase deploy --only hosting --token=${{ secrets.FIREBASE_TOKEN }}")]),s._v("\n")])])]),a("ul",[a("li",[s._v("次のコマンドを実行する。")])]),s._v(" "),a("p",[a("code",[s._v("code.6-2")]),s._v(" "),a("em",[s._v("shell")])]),s._v(" "),a("div",{staticClass:"language-properties extra-class"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("git")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("add .")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("git")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('commit -m "テストに失敗させてみる"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("git")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("push origin HEAD")]),s._v("\n")])])]),a("p",[s._v("今回、余分な一文をコードに書いているため ESLint が通らず、失敗となります。")]),s._v(" "),a("p",[s._v("Actions のログからどこで失敗となっているのか確認しましょう。")]),s._v(" "),a("h2",{attrs:{id:"_2-エラー原因の一文を削除"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-エラー原因の一文を削除"}},[s._v("#")]),s._v(" 2. エラー原因の一文を削除")]),s._v(" "),a("p",[s._v("失敗の原因になっている一文を削除します。")]),s._v(" "),a("p",[s._v("次の操作を行ってください。")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("pages/home.vue")]),s._v("を次の通り編集する。\n"),a("ul",[a("li",[s._v("L9 の一文を削除")])])])]),s._v(" "),a("p",[a("code",[s._v("code.6-3")]),s._v(" "),a("em",[s._v("pages/home.vue")])]),s._v(" "),a("div",{staticClass:"language-diff extra-class"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-diff"}},[a("code",[a("span",{pre:!0,attrs:{class:"token deleted-arrow deleted"}},[a("span",{pre:!0,attrs:{class:"token prefix deleted"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token line"}},[s._v("template>\n")])]),a("span",{pre:!0,attrs:{class:"token unchanged"}},[a("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[s._v(" ")]),a("span",{pre:!0,attrs:{class:"token line"}},[s._v(" <v-row>\n")]),a("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[s._v(" ")]),a("span",{pre:!0,attrs:{class:"token line"}},[s._v('   <v-col class="text-center">\n')]),a("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[s._v(" ")]),a("span",{pre:!0,attrs:{class:"token line"}},[s._v('     <img src="/markingcloud-icon.png" />\n')]),a("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[s._v(" ")]),a("span",{pre:!0,attrs:{class:"token line"}},[s._v('     <blockquote class="blockquote">\n')]),a("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[s._v(" ")]),a("span",{pre:!0,attrs:{class:"token line"}},[s._v("       &#8220;NO CLOUD, NO LIFE&#8221;\n")]),a("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[s._v(" ")]),a("span",{pre:!0,attrs:{class:"token line"}},[s._v("       <footer>\n")]),a("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[s._v(" ")]),a("span",{pre:!0,attrs:{class:"token line"}},[s._v("         <small>\n")])]),a("span",{pre:!0,attrs:{class:"token deleted-sign deleted"}},[a("span",{pre:!0,attrs:{class:"token prefix deleted"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token line"}},[s._v("           <>エラー原因の一文\n")])]),a("span",{pre:!0,attrs:{class:"token unchanged"}},[a("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[s._v(" ")]),a("span",{pre:!0,attrs:{class:"token line"}},[s._v("           <em>&mdash;by MarkingCloudTest</em>\n")]),a("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[s._v(" ")]),a("span",{pre:!0,attrs:{class:"token line"}},[s._v("         </small>\n")]),a("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[s._v(" ")]),a("span",{pre:!0,attrs:{class:"token line"}},[s._v("       </footer>\n")]),a("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[s._v(" ")]),a("span",{pre:!0,attrs:{class:"token line"}},[s._v("     </blockquote>\n")]),a("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[s._v(" ")]),a("span",{pre:!0,attrs:{class:"token line"}},[s._v("   </v-col>\n")]),a("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[s._v(" ")]),a("span",{pre:!0,attrs:{class:"token line"}},[s._v(" </v-row>\n")])]),a("span",{pre:!0,attrs:{class:"token deleted-arrow deleted"}},[a("span",{pre:!0,attrs:{class:"token prefix deleted"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token line"}},[s._v("/template>\n")])])])])]),a("ul",[a("li",[s._v("次のコマンドを実行する。")])]),s._v(" "),a("p",[a("code",[s._v("code.6-4")]),s._v(" "),a("em",[s._v("shell")])]),s._v(" "),a("div",{staticClass:"language-properties extra-class"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("git")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("add .")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("git")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v('commit -m "エラー原因の一文削除"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("git")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-value"}},[s._v("push origin HEAD")]),s._v("\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);